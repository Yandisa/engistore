{% extends 'base.html' %}
{% load static %}

{% block title %}My Part Requests | EngiStore{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">ğŸ“ My Part Requests</h2>

  {% if requests %}
    <!-- ğŸ“‹ Responsive table of requests -->
    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Part Name</th>
            <th>Part Number</th>
            <th>Quantity</th>
            <th>Requested On</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for request in requests %}
          <tr>
            <td>{{ request.name }}</td>
            <td>{{ request.part_number }}</td>
            <td>{{ request.quantity_needed }}</td>
            <td>{{ request.created_at|date:"M d, Y" }}</td>
            <td>
              {% if request.status == 'Pending' %}
                <span class="badge bg-warning text-dark">
                  Pending
                </span>
              {% elif request.status == 'Approved - Awaiting Delivery' %}
                <span class="badge bg-info text-dark">
                  Approved - Awaiting Delivery
                </span>
              {% elif request.status == 'Rejected' %}
                <span class="badge bg-danger">Rejected</span>
              {% elif request.status == 'Delivered' %}
                <span class="badge bg-success">Delivered</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="text-muted">
      You haven't submitted any part requests yet.
    </p>
  {% endif %}
</div>
{% endblock %}
