{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- ðŸ”§ Asset Overview -->
<div class="card mb-4 shadow-sm">
  <div class="card-body">
    <h3 class="card-title">
      {{ asset.name }}
      <small class="text-muted">({{ asset.code }})</small>
    </h3>
    <p class="card-text">
      {{ asset.description|default:"No description." }}
    </p>
  </div>
</div>

<!-- ðŸ“‹ Usage History -->
<h4>Part Usage History</h4>
{% if part_usages %}
  <ul class="list-group mb-4">
    {% for usage in part_usages %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          {{ usage.used_on }} â€” <strong>{{ usage.part.name }}</strong>
        </div>
        <span class="badge bg-primary rounded-pill">
          {{ usage.quantity_used }}
        </span>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p class="text-muted mb-4">
    No parts have been logged for this asset yet.
  </p>
{% endif %}

<!-- âž• Log New Usage -->
<hr class="my-4">
<h5>Log Part Usage</h5>
<form method="post" class="row g-3">
  {% csrf_token %}
  <div class="col-md-6">
    {{ form.part.label_tag }} {{ form.part }}
  </div>
  <div class="col-md-4">
    {{ form.quantity_used.label_tag }} {{ form.quantity_used }}
  </div>
  <div class="col-md-2">
    <button type="submit" class="btn btn-success w-100 mt-4">
      Log Usage
    </button>
  </div>
</form>
{% endblock %}
